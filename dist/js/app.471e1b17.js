(function(t){function e(e){for(var n,i,s=e[0],c=e[1],u=e[2],m=0,d=[];m<s.length;m++)i=s[m],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&d.push(r[i][0]),r[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);l&&l(e);while(d.length)d.shift()();return o.push.apply(o,u||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],n=!0,s=1;s<a.length;s++){var c=a[s];0!==r[c]&&(n=!1)}n&&(o.splice(e--,1),t=i(i.s=a[0]))}return t}var n={},r={app:0},o=[];function i(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=n,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var l=c;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var n=a("85ec"),r=a.n(n);r.a},"349f":function(t,e,a){},"497d":function(t,e,a){"use strict";var n=a("349f"),r=a.n(n);r.a},"4e40":function(t,e,a){t.exports=a.p+"img/transportation.772634f9.png"},"4fa1":function(t,e,a){"use strict";var n=a("9eb9"),r=a.n(n);r.a},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},o=[],i=(a("96cf"),a("1da1")),s={data:function(){return{formData:new FormData,fileList:[],tagNameList:["圖片一","圖片二","圖片三"],imgsrc:""}},created:function(){this.getAlbum()},methods:{trans:function(){this.$router.push("/")},update:function(){console.log(1111)},getProjects:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("getProjects",{params:{lineId:"testtest"}});case 2:a=e.sent,console.log(a);case 4:case"end":return e.stop()}}),e)})))()},uploadImages:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t.$refs.upload.uploadFiles,console.log(a);case 2:case"end":return e.stop()}}),e)})))()},transtoBase64:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,r,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t.$refs.upload.uploadFiles,console.log(a),n=new FileReader,n.readAsDataURL(a[0].raw),r="",o="",s={},n.onload=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(c){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=c.target.result,console.log("000000"+r),n.readAsDataURL(a[1].raw),n.onload=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(a){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=a.target.result,console.log("111111"+o),s=t.$qs.stringify({img0:r,img1:o,place:"早餐店",project_id:"5f8f10f3b70e39b62c939255"}),e.next=5,t.$http.post("testForCreateAlbum",s,{headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}});case 5:n=e.sent,n&&(console.log(n),console.log("成功接收"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();case 8:case"end":return e.stop()}}),e)})))()},getAlbum:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("getAlbum?place=早餐店");case 2:a=e.sent,console.log(a);case 4:case"end":return e.stop()}}),e)})))()}}},c=s,u=(a("034f"),a("2877")),l=Object(u["a"])(c,r,o,!1,null,null,null),m=l.exports,d=a("8c4f"),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[0==t.state?a("div",[t._m(0),a("div",{staticClass:"container"},[a("p",[t._v("旅程名稱:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.project_name,expression:"project_name"}],attrs:{name:"project_name"},domProps:{value:t.project_name},on:{input:function(e){e.target.composing||(t.project_name=e.target.value)}}}),a("p",[t._v("日期:")]),a("input",{staticClass:"calendar",attrs:{type:"text",id:"text-calendar",name:"date"}}),a("p",[t._v("地點:")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.place,expression:"place"}],attrs:{name:"place"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.place=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"Keelung"}},[t._v("基隆")]),a("option",{attrs:{value:"NewTaipei"}},[t._v("新北")]),a("option",{attrs:{value:"Taipei"}},[t._v("臺北")]),a("option",{attrs:{value:"Yilan"}},[t._v("宜蘭")]),a("option",{attrs:{value:"Taoyuan"}},[t._v("桃園")]),a("option",{attrs:{value:"Hsinchu"}},[t._v("新竹")]),a("option",{attrs:{value:"Miaoli"}},[t._v("苗栗")]),a("option",{attrs:{value:"Taichung"}},[t._v("臺中")]),a("option",{attrs:{value:"Changhua"}},[t._v("彰化")]),a("option",{attrs:{value:"Nantou"}},[t._v("南投")]),a("option",{attrs:{value:"Yunlin"}},[t._v("雲林")]),a("option",{attrs:{value:"Chiayi"}},[t._v("嘉義")]),a("option",{attrs:{value:"Tainan"}},[t._v("臺南")]),a("option",{attrs:{value:"Kaohsiung"}},[t._v("高雄")]),a("option",{attrs:{value:"Pingtung"}},[t._v("屏東")]),a("option",{attrs:{value:"Taitung"}},[t._v("臺東")]),a("option",{attrs:{value:"Hualien"}},[t._v("花蓮")]),a("option",{attrs:{value:"Penghu"}},[t._v("澎湖")]),a("option",{attrs:{value:"Kinmen"}},[t._v("金門")]),a("option",{attrs:{value:"Lienchiang"}},[t._v("連江")])]),a("button",{attrs:{type:"submit"},on:{click:t.uploadData}},[t._v("創建 >>")])])]):t._e(),1==t.state?a("div",{staticClass:"share"},[a("h1",[t._v("創建成功")]),a("p",[t._v("將旅程分享給你的夥伴")]),a("div",{staticClass:"member_group"},[a("img",{staticClass:"circle_wrapper",attrs:{id:"profile_img",src:t.UserImg}}),a("div",{staticClass:"circle_wrapper invite_wrapper",on:{click:t.shareTarget}},[a("i",{staticClass:"fas fa-share fa-2x"})])]),a("a",{attrs:{href:t.url}},[t._v("進入專案")])]):t._e()])},f=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"image_container"},[a("img",{attrs:{id:"cover",src:"https://tnimage.s3.hicloud.net.tw/photos/2019/10/07/1570443526-5d9b1106c7c9c.jpg"}}),a("div",{staticClass:"img_filter"}),a("h1",[t._v("創建旅程")])])}],h={name:"Home",data:function(){return{UserImg:"../assets/logo.png",UserName:"test",project_name:null,place:null,date:null,lineId:"testtest",project_id:null,url:null,state:0}},beforeCreate:function(){var t=this;window.$(document).ready((function(){window.$(".calendar").pignoseCalendar({multiple:!0,buttons:!0})}));var e="1655093786-Joa47Erb";window.liff.init({liffId:e}).then((function(){console.log("LIFF init"),window.liff.isLoggedIn()?window.liff.getProfile().then((function(e){t.lineId=e.userId,t.UserName=e.displayName,t.UserImg=e.pictureUrl})):window.liff.login()}))},methods:{uploadData:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.date=document.getElementsByName("date")[0].value,e.next=3,t.$http.post("createProject",{lineId:t.lineId,username:t.UserName,projectName:t.project_name,time:t.date,place:t.place});case 3:a=e.sent,t.project_id=a.data.project_id,t.url="https://liff.line.me/1655093786-Joa47Erb/project?projectId="+t.project_id,t.state=1;case 7:case"end":return e.stop()}}),e)})))()},shareTarget:function(){window.liff.shareTargetPicker([{type:"flex",altText:"Flex Message",contents:{type:"bubble",hero:{type:"image",url:"https://tnimage.s3.hicloud.net.tw/photos/2019/10/07/1570443526-5d9b1106c7c9c.jpg",size:"full",aspectRatio:"20:13",aspectMode:"cover",action:{type:"uri",uri:this.url}},body:{type:"box",layout:"vertical",contents:[{type:"text",text:this.project_name,weight:"bold",size:"xl"},{type:"box",layout:"vertical",margin:"lg",spacing:"sm",contents:[{type:"box",layout:"baseline",contents:[{type:"text",text:"邀請人",color:"#aaaaaa",size:"sm",flex:2},{type:"text",text:this.UserName,wrap:!0,color:"#666666",size:"sm",flex:5}]},{type:"box",layout:"baseline",contents:[{type:"text",text:"時間",color:"#aaaaaa",size:"sm",flex:2},{type:"text",text:this.date,wrap:!0,color:"#666666",size:"sm",flex:5}]},{type:"box",layout:"baseline",contents:[{type:"text",text:"地點",color:"#aaaaaa",size:"sm",flex:2},{type:"text",text:this.place,wrap:!0,color:"#666666",size:"sm",flex:5}]}]}]},footer:{type:"box",layout:"vertical",spacing:"sm",contents:[{type:"button",style:"link",height:"sm",action:{type:"uri",label:"加入",uri:this.url}},{type:"spacer",size:"sm"}],flex:0}}}])}}},v=h,b=(a("497d"),Object(u["a"])(v,p,f,!1,null,"120b0116",null)),_=b.exports,g=function(){var t=this,e=this,n=e.$createElement,r=e._self._c||n;return r("div",[3==e.state?r("div",[r("div",{staticClass:"btn_next",on:{click:function(){return t.state=4}}},[e._v("Debts")]),e._l(e.records,(function(t){return r("Record",{key:t.demo,attrs:{data:t}})}))],2):e._e(),3==e.state?r("div",{staticClass:"btn_next",on:{click:function(t){return e.handleClick(0)}}},[e._v("+")]):e._e(),4==e.state?r("div",[r("div",{staticClass:"btn_next",on:{click:function(){return t.state=3}}},[e._v("＜")]),r("Debt",{attrs:{data:e.records}})],1):e._e(),0==e.state||1==e.state||2==e.state?r("nav",[r("h1",[e._v("記 帳")]),r("ul",{staticClass:"menu_ul"},[r("li",[r("a",{staticClass:"menu1",attrs:{href:"#",type:"button"},on:{click:e.menu1}},[e._v("金額")])]),r("li",[r("a",{staticClass:"menu2",attrs:{href:"#",type:"button"},on:{click:e.menu2}},[e._v("誰付的錢？")])]),r("li",[r("a",{staticClass:"menu3",attrs:{href:"#",type:"button"},on:{click:e.menu3}},[e._v("為誰？")])])])]):e._e(),0==e.state?r("div",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.amount,expression:"amount"}],staticClass:"money",attrs:{placeholder:"點擊輸入帳單金額"},domProps:{value:e.amount},on:{input:function(t){t.target.composing||(e.amount=t.target.value)}}}),r("h4",[e._v("輸入品項：")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.item_name,expression:"item_name"}],domProps:{value:e.item_name},on:{input:function(t){t.target.composing||(e.item_name=t.target.value)}}}),r("h5",[e._v("類別：")]),r("img",{staticClass:"sort",attrs:{src:a("5f0a"),width:"100"}}),r("img",{staticClass:"sort",attrs:{src:a("e98c"),width:"100"}}),r("img",{staticClass:"sort",attrs:{src:a("4e40"),width:"100"}}),r("img",{staticClass:"sort",attrs:{src:a("f70f"),width:"100"}}),r("img",{staticClass:"sort",attrs:{src:a("df84"),width:"100"}}),r("img",{staticClass:"sort",attrs:{src:a("e2fe"),width:"100"}}),r("h5",[e._v("備註：")]),r("table",[r("tr",[e._m(0),r("td",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.memo,expression:"memo"}],staticClass:"msgnote",attrs:{placeholder:"點擊新增備註"},domProps:{value:e.memo},on:{input:function(t){t.target.composing||(e.memo=t.target.value)}}})])]),e._m(1)]),r("h4",[e._v("日期：")]),r("input",{staticClass:"calendar",attrs:{type:"text",id:"text-calendar",name:"date"}})]):e._e(),0==e.state&&null!=e.amount?r("div",{staticClass:"btn_next",on:{click:function(t){return e.handleClick(1)}}},[e._v("Who Paid >>")]):e._e(),1==e.state?r("Payer",{attrs:{amount:Number(e.amount),member:e.member}}):e._e(),1==e.state&&e.checkValid(1)?r("div",{staticClass:"btn_next",on:{click:function(){return t.state=2}}},[e._v("Paid For >>")]):e._e(),2==e.state?r("Paidfor",{attrs:{amount:Number(e.amount),member:e.member}}):e._e(),2==e.state&&e.checkValid(2)?r("div",{staticClass:"btn_next",on:{click:e.uploadRecord}},[e._v("Save")]):e._e()],1)},x=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("td",{attrs:{rowspan:"2"}},[n("img",{staticClass:"pen",attrs:{src:a("fddd")}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",[a("hr",{staticClass:"note"})])])}],w=(a("4160"),a("159b"),function(){var t=this,e=this,a=e.$createElement,n=e._self._c||a;return n("div",[n("div",{staticClass:"row",on:{click:function(){return t.popup=!t.popup}}},[n("span",[e._v(e._s(e.data.itemName))]),n("span",[e._v("$"+e._s(e.data.amount))])]),1==e.popup?n("div",{staticClass:"detail"},[n("div",{staticClass:"banner"},[e._v("Who Paid?")]),e._l(e.userWhoPaid(),(function(t){return n("div",{key:t.name},[n("span",[e._v(e._s(t.name))]),n("span",[e._v("$"+e._s(t.paidAmount))])])})),n("div",{staticClass:"banner"},[e._v("For Who?")]),e._l(e.userWhoCost(),(function(t){return n("div",{key:t.name},[n("span",[e._v(e._s(t.name))]),n("span",[e._v("$"+e._s(t.cost))])])})),n("div",{staticClass:"banner"},[e._v("Memo")]),n("div",[e._v(e._s(e.data.memo))])],2):e._e()])}),k=[],y=(a("4de4"),{name:"record",props:{data:Object},data:function(){return{popup:!1}},methods:{userWhoPaid:function(){var t=[];return t=this.data.user.filter((function(t){return null!=t.paidAmount})),t},userWhoCost:function(){var t=[];return t=this.data.user.filter((function(t){return null!=t.cost})),t}}}),j=y,C=(a("8131"),Object(u["a"])(j,w,k,!1,null,"ce62c5a6",null)),A=C.exports,$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",t._l(t.debt_array,(function(e){return a("div",{key:e.name},[a("span",[t._v(t._s(e.name))]),a("span",[t._v(t._s(e.debt))])])})),0)},N=[],P=(a("b0c0"),{name:"debt",props:{data:Array},data:function(){return{debt_array:[]}},created:function(){for(var t=0;t<this.data[0]["user"].length;t++){for(var e=0,a=0;a<this.data.length;a++)e+=this.data[a].user[t].paidAmount,e-=this.data[a].user[t].cost;this.debt_array.push({name:this.data[0].user[t].name,debt:e})}}}),O=P,R=Object(u["a"])(O,$,N,!1,null,"151040a3",null),E=R.exports,S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"project"},[a("div",{attrs:{id:"nav"}},[a("span",[t._v("For who?")]),a("span",[a("i",[t._v("$"+t._s(t.amount))])])]),a("ul",{staticClass:"member_list_wrapper",attrs:{id:"member_list_wrapper"}},t._l(t.member,(function(e,n){return a("MemberCost",{key:e.name,attrs:{index:n,name:e.name,state:e.state,cost:e.cost},on:{checkbox:t.handleCheckboxChanged,amountEdited:t.updateAmount}})})),1)])},I=[],F=(a("a9e3"),a("b680"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"todo-app__item"},[a("div",{staticClass:"todo-app__checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.checkboxState,expression:"checkboxState"}],attrs:{type:"checkbox",id:t.name},domProps:{checked:Array.isArray(t.checkboxState)?t._i(t.checkboxState,null)>-1:t.checkboxState},on:{change:function(e){var a=t.checkboxState,n=e.target,r=!!n.checked;if(Array.isArray(a)){var o=null,i=t._i(a,o);n.checked?i<0&&(t.checkboxState=a.concat([o])):i>-1&&(t.checkboxState=a.slice(0,i).concat(a.slice(i+1)))}else t.checkboxState=r}}}),a("label",{attrs:{for:t.name}})]),a("h3",{staticClass:"todo-app__item-detail"},[t._v(t._s(t.name))]),a("input",{directives:[{name:"show",rawName:"v-show",value:t.state,expression:"state"}],ref:"inputAmount",attrs:{type:"text"},domProps:{value:t.cost},on:{keyup:t.emitAmount}}),a("i",{directives:[{name:"show",rawName:"v-show",value:t.state,expression:"state"}],staticClass:"fas fa-pen",on:{click:t.editAmount}})])}),T=[],M={name:"MemberCost",props:{index:Number,name:String,state:Boolean,cost:Number},data:function(){return{checkboxState:this.state}},watch:{checkboxState:function(){this.$emit("checkbox",this.index)}},methods:{editAmount:function(){this.$refs.inputAmount.focus()},emitAmount:function(){this.$emit("amountEdited",[this.index,this.$refs.inputAmount.value])}}},U=M,L=(a("dca1"),Object(u["a"])(U,F,T,!1,null,"00034f6a",null)),z=L.exports,D={name:"paidfor",components:{MemberCost:z},props:{amount:Number,member:Array},created:function(){this.member.forEach((function(t){t.edited=!1,t.state=!1}))},methods:{handleCheckboxChanged:function(t){this.member[t].state=!this.member[t].state,this.member[t].state||(this.member[t].edited=!1,this.member[t].cost=null),this.calculateAmount()},calculateAmount:function(){var t=this,e=0;this.member.filter((function(t){return t.edited})).forEach((function(t){e+=t.cost}));var a=this.member.filter((function(t){return t.state&&!t.edited}));this.member.forEach((function(n){if(n.state&&!n.edited){var r=(t.amount-e)/a.length;n.cost=Number(r.toFixed(2))}else n.state||(n.cost=null)}))},updateAmount:function(t){0!=Number(t[1])&&(this.member[t[0]].edited=!0,this.member[t[0]].cost=Number(t[1])),this.calculateAmount()}}},W=D,B=(a("d2f3"),Object(u["a"])(W,S,I,!1,null,"08cc4e0e",null)),J=B.exports,q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"project"},[a("div",{attrs:{id:"nav"}},[a("span",[t._v("Who paid?")]),a("span",[a("i",[t._v("$"+t._s(t.amount))])])]),a("ul",{staticClass:"member_list_wrapper",attrs:{id:"member_list_wrapper"}},t._l(t.member,(function(e,n){return a("Member",{key:e.name,attrs:{index:n,name:e.name,state:e.state,paidAmount:e.paidAmount},on:{checkbox:t.handleCheckboxChanged,amountEdited:t.updateAmount}})})),1)])},H=[],K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"todo-app__item"},[a("div",{staticClass:"todo-app__checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.checkboxState,expression:"checkboxState"}],attrs:{type:"checkbox",id:t.name},domProps:{checked:Array.isArray(t.checkboxState)?t._i(t.checkboxState,null)>-1:t.checkboxState},on:{change:function(e){var a=t.checkboxState,n=e.target,r=!!n.checked;if(Array.isArray(a)){var o=null,i=t._i(a,o);n.checked?i<0&&(t.checkboxState=a.concat([o])):i>-1&&(t.checkboxState=a.slice(0,i).concat(a.slice(i+1)))}else t.checkboxState=r}}}),a("label",{attrs:{for:t.name}})]),a("h3",{staticClass:"todo-app__item-detail"},[t._v(t._s(t.name))]),a("input",{directives:[{name:"show",rawName:"v-show",value:t.state,expression:"state"}],ref:"inputAmount",attrs:{type:"text"},domProps:{value:t.paidAmount},on:{keyup:t.emitAmount}}),a("i",{directives:[{name:"show",rawName:"v-show",value:t.state,expression:"state"}],staticClass:"fas fa-pen",on:{click:t.editAmount}})])},V=[],Y={name:"Member",props:{index:Number,name:String,state:Boolean,paidAmount:Number},data:function(){return{checkboxState:this.state}},watch:{checkboxState:function(){this.$emit("checkbox",this.index)}},methods:{editAmount:function(){this.$refs.inputAmount.focus()},emitAmount:function(){this.$emit("amountEdited",[this.index,this.$refs.inputAmount.value])}}},G=Y,Q=(a("c7c6"),Object(u["a"])(G,K,V,!1,null,"28ea3922",null)),X=Q.exports,Z={name:"payer",components:{Member:X},props:{amount:Number,member:Array},methods:{handleCheckboxChanged:function(t){this.member[t].state=!this.member[t].state,this.member[t].state||(this.member[t].edited=!1,this.member[t].paidAmount=null),this.calculateAmount()},calculateAmount:function(){var t=this,e=0;this.member.filter((function(t){return t.edited})).forEach((function(t){e+=t.paidAmount}));var a=this.member.filter((function(t){return t.state&&!t.edited}));this.member.forEach((function(n){if(n.state&&!n.edited){var r=(t.amount-e)/a.length;n.paidAmount=Number(r.toFixed(2))}else n.state||(n.paidAmount=null)}))},updateAmount:function(t){0!=Number(t[1])&&(this.member[t[0]].edited=!0,this.member[t[0]].paidAmount=Number(t[1])),this.calculateAmount()}}},tt=Z,et=(a("4fa1"),Object(u["a"])(tt,q,H,!1,null,"2a51f913",null)),at=et.exports,nt={name:"bookkeeping",components:{Payer:at,Paidfor:J,Record:A,Debt:E},data:function(){return{state:3,amount:"",item_name:"",memo:"",date:"",member:"",records:[],project_id:"5f93c69ec1cf340017d9b33b"}},created:function(){this.requestRecords()},methods:{requestRecords:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,r,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("getRecord?project_id="+t.project_id);case 2:for(a=e.sent,n=[],r=0;r<a.data.record.length;r++)n[r]=a.data.record[r].item,n[r].user=a.data.record[r].member;for(t.records=n,o=[],i=0;i<t.records[0]["user"].length;i++)o.push(Object.assign({},t.records[0]["user"][i]));o.forEach((function(t){t.paidAmount=null,t.cost=null,t.state=!1,t.edited=!1})),t.member=o;case 10:case"end":return e.stop()}}),e)})))()},handleClick:function(t){switch(t){case 0:this.state=0,this.amount=null,this.item_name=null,this.date=null,this.memo=null,window.$(document).ready((function(){window.$(".calendar").pignoseCalendar()}));break;case 1:this.date=document.getElementsByName("date")[0].value,this.state=1;break}},checkValid:function(t){var e=0;return 1==t?this.member.forEach((function(t){e+=t.paidAmount})):2==t&&this.member.forEach((function(t){e+=t.cost})),Math.round(e)==this.amount},uploadRecord:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.member.forEach((function(t){delete t.edited,delete t.state})),a={itemName:t.item_name,date:t.date,amount:t.amount,memo:t.memo,user:t.member},t.records.push(a),n={project_id:t.project_id,item:a},e.next=6,t.$http.post("createRecord",n);case 6:r=e.sent,console.log(r),t.state=3;case 9:case"end":return e.stop()}}),e)})))()}}},rt=nt,ot=(a("ec3b"),Object(u["a"])(rt,g,x,!1,null,"a9c2acae",null)),it=ot.exports,st=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("ul",t._l(t.project_list,(function(e,n){return a("Project",{key:n,attrs:{res:e,index:n},on:{projectClicked:t.handleClick}})})),1)])},ct=[],ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{on:{click:t.handleClick}},[a("div",[t._v(t._s(t.res.projectName))]),a("span",[t._v(t._s(t.res.place))]),a("span",[t._v(t._s(t.res.createTime))])])},lt=[],mt={name:"project",props:{res:Object,index:Number},methods:{handleClick:function(){this.$emit("projectClicked",this.index)}}},dt=mt,pt=Object(u["a"])(dt,ut,lt,!1,null,null,null),ft=pt.exports,ht={name:"search",components:{Project:ft},data:function(){return{project_list:null,line_id:"testtest",res:null}},created:function(){var t=this,e="1655093786-Joa47Erb";window.liff.init({liffId:e}).then((function(){console.log("LIFF init"),window.liff.isLoggedIn()?window.liff.getProfile().then((function(e){t.line_id=e.userId})):window.liff.login()})),this.getProjects()},methods:{getProjects:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("getProjects?lineId="+t.line_id);case 2:a=e.sent,t.project_list=a.data.result[0].projects_list,console.log(t.project_list);case 5:case"end":return e.stop()}}),e)})))()},handleClick:function(t){console.log(this.project_list[t]._id)}}},vt=ht,bt=Object(u["a"])(vt,st,ct,!1,null,null,null),_t=bt.exports;n["default"].use(d["a"]);var gt=[{path:"/",name:"Home",component:_},{path:"/bookkeeping",name:"BookKeeping",component:it},{path:"/search",name:"Search",component:_t}],xt=new d["a"]({mode:"history",routes:gt}),wt=xt,kt=(a("fd32"),a("bc3a")),yt=a.n(kt),jt=(a("f225"),a("450d"),a("89a9")),Ct=a.n(jt),At=(a("10cb"),a("f3ad")),$t=a.n(At),Nt=(a("1951"),a("eedf")),Pt=a.n(Nt);n["default"].use(Pt.a),n["default"].use($t.a),n["default"].use(Ct.a);a("0fae");var Ot=a("4328"),Rt=a.n(Ot);n["default"].config.productionTip=!1,yt.a.defaults.baseURL="https://hereisanewapp.herokuapp.com/",n["default"].prototype.$http=yt.a,n["default"].prototype.$qs=Rt.a,new n["default"]({router:wt,mounted:function(){},render:function(t){return t(m)}}).$mount("#app")},"5f0a":function(t,e,a){t.exports=a.p+"img/food.57bb851b.png"},8131:function(t,e,a){"use strict";var n=a("8665"),r=a.n(n);r.a},"85ec":function(t,e,a){},8665:function(t,e,a){},"9c91":function(t,e,a){},"9eb9":function(t,e,a){},c7c6:function(t,e,a){"use strict";var n=a("da68"),r=a.n(n);r.a},d06f:function(t,e,a){},d2f3:function(t,e,a){"use strict";var n=a("d06f"),r=a.n(n);r.a},da68:function(t,e,a){},dca1:function(t,e,a){"use strict";var n=a("fa8c"),r=a.n(n);r.a},df84:function(t,e,a){t.exports=a.p+"img/play.35f0eac5.png"},e2fe:function(t,e,a){t.exports=a.p+"img/others.e3a66d05.png"},e98c:function(t,e,a){t.exports=a.p+"img/accommodation.4e465f2f.png"},ec3b:function(t,e,a){"use strict";var n=a("9c91"),r=a.n(n);r.a},f70f:function(t,e,a){t.exports=a.p+"img/shopping.e9ad6135.png"},fa8c:function(t,e,a){},fddd:function(t,e,a){t.exports=a.p+"img/pen.4b3c75cf.png"}});
//# sourceMappingURL=app.471e1b17.js.map